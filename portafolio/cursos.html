<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>IA Studio | Academia de Inteligencia Artificial</title>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Phosphor Icons -->
  <script src="https://unpkg.com/@phosphor-icons/web"></script>
  <!-- Google Fonts: Inter -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
    rel="stylesheet">

  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          fontFamily: {
            sans: ['Inter', 'sans-serif'],
          },
        }
      }
    }
  </script>

  <style>
    .custom-scrollbar::-webkit-scrollbar {
      width: 3px;
    }

    .custom-scrollbar::-webkit-scrollbar-track {
      background: transparent;
    }

    .custom-scrollbar::-webkit-scrollbar-thumb {
      background: #e4e4e7;
      border-radius: 10px;
    }

    .custom-scrollbar::-webkit-scrollbar-thumb:hover {
      background: #d4d4d8;
    }

    iframe {
      border-radius: 12px;
    }

    /* Animaciones suaves para la barra lateral */
    #sidebar {
      transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .sidebar-closed {
      width: 0 !important;
      overflow: hidden;
      border: none !important;
    }
  </style>
</head>

<body
  class="bg-white dark:bg-zinc-950 text-zinc-900 dark:text-zinc-100 font-sans antialiased overflow-hidden h-screen flex transition-colors duration-300">

  <!-- Sidebar Minimalista -->
  <aside id="sidebar"
    class="w-80 border-r border-zinc-100 dark:border-zinc-800 flex flex-col h-full bg-white dark:bg-zinc-900 relative z-20">
    <div class="p-8 pb-4">
      <div class="flex items-center justify-between mb-6">
        <div class="flex items-center gap-2">
          <div class="w-8 h-8 bg-black dark:bg-white rounded flex items-center justify-center">
            <i class="ph-fill ph-zap text-white dark:text-black text-lg"></i>
          </div>
          <h1 class="font-bold tracking-tight text-lg dark:text-white">IA Studio</h1>
        </div>
        <button id="theme-toggle"
          class="p-2 rounded-full hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors text-zinc-500 dark:text-zinc-400">
          <i class="ph ph-moon text-xl dark:hidden"></i>
          <i class="ph ph-sun text-xl hidden dark:block"></i>
        </button>
      </div>

      <div class="space-y-1">
        <div class="flex justify-between text-[10px] uppercase tracking-widest text-zinc-400 font-bold mb-2">
          <span>Progreso del curso</span>
          <span id="progress-text">0%</span>
        </div>
        <div class="h-1 w-full bg-zinc-100 dark:bg-zinc-800 rounded-full overflow-hidden">
          <div id="progress-bar" class="h-full bg-zinc-900 dark:bg-zinc-100 transition-all duration-700 ease-out"
            style="width: 0%">
          </div>
        </div>
      </div>
    </div>

    <nav id="module-container" class="flex-1 overflow-y-auto px-4 py-4 custom-scrollbar">
      <!-- Los módulos se insertarán aquí dinámicamente -->
    </nav>
  </aside>

  <!-- Main Content -->
  <main class="flex-1 flex flex-col min-w-0 bg-white dark:bg-zinc-950 relative transition-colors duration-300">
    <header class="h-20 flex items-center justify-between px-8 border-b border-zinc-50 dark:border-zinc-900">
      <div class="flex items-center gap-6">
        <button id="toggle-sidebar"
          class="text-zinc-400 hover:text-zinc-900 dark:hover:text-zinc-100 transition-colors p-2">
          <i class="ph ph-layout text-xl"></i>
        </button>
        <nav class="hidden md:flex items-center gap-2 text-sm text-zinc-400">
          <span class="hover:text-zinc-900 dark:hover:text-zinc-100 cursor-pointer">Cursos</span>
          <i class="ph ph-caret-right text-xs"></i>
          <span id="breadcrumb-lesson" class="text-zinc-900 dark:text-zinc-100 font-medium">Cargando...</span>
        </nav>
      </div>

      <div class="flex items-center gap-4">
        <a href="../RodrigoDCP.html"
          class="flex items-center gap-2 text-sm font-medium text-zinc-500 hover:text-zinc-900 dark:hover:text-zinc-100 transition-colors mr-4">
          <i class="ph ph-user-circle text-xl"></i>
          <span class="hidden sm:inline">Sobre mí</span>
        </a>
        <div class="flex -space-x-2">
          <div
            class="w-8 h-8 rounded-full border-2 border-white dark:border-zinc-900 bg-zinc-200 dark:bg-zinc-700 flex items-center justify-center text-[10px] font-bold dark:text-zinc-100">
            ©</div>
        </div>
      </div>
    </header>

    <div class="flex-1 overflow-y-auto px-8 py-10 transition-colors">
      <div class="max-w-4xl mx-auto">
        <!-- Video Player Section -->
        <div
          class="bg-zinc-50 dark:bg-zinc-900 rounded-3xl overflow-hidden mb-10 shadow-sm border border-zinc-100 dark:border-zinc-800">
          <div class="aspect-video relative">
            <iframe id="video-frame" class="w-full h-full" src="" title="Video de la lección" frameborder="0"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
              allowfullscreen></iframe>
          </div>
        </div>

        <!-- Content Info -->
        <div class="flex flex-col md:flex-row gap-12">
          <div class="flex-1">
            <div class="flex items-center gap-2 mb-4">
              <span id="lesson-tech"
                class="text-[10px] font-bold tracking-tighter uppercase px-2 py-0.5 bg-zinc-100 dark:bg-zinc-800 rounded text-zinc-500 dark:text-zinc-400">
                TECNOLOGÍA
              </span>
              <span class="text-[10px] text-zinc-300 dark:text-zinc-700 font-bold">•</span>
              <span id="lesson-counter" class="text-[10px] text-zinc-500 dark:text-zinc-400 font-medium">Lección 0 de
                0</span>
            </div>

            <h2 id="lesson-title"
              class="text-3xl font-bold tracking-tight text-zinc-900 dark:text-white mb-6 leading-tight">
              Título de la lección
            </h2>

            <p id="lesson-description" class="text-zinc-500 dark:text-zinc-400 leading-relaxed mb-8 text-lg">
              Descripción de la lección.
            </p>

            <div class="flex flex-wrap gap-4">
              <button id="complete-btn"
                class="px-6 py-3 rounded-full text-sm font-bold transition-all bg-black dark:bg-white text-white dark:text-black hover:scale-105 active:scale-95">
                Marcar como completada
              </button>
            </div>
          </div>

          <div class="w-full md:w-64 space-y-8">
            <div>
              <h4 class="text-xs font-bold uppercase tracking-widest text-zinc-400 mb-4">Instructor</h4>
              <div class="flex items-center gap-3">
                <div id="instructor-initial"
                  class="w-10 h-10 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center font-bold text-zinc-400 dark:text-zinc-500 text-xs text-center">
                  ?
                </div>
                <div>
                  <p id="instructor-name" class="text-sm font-bold text-zinc-900 dark:text-white">Instructor Name</p>
                  <p class="text-[10px] text-zinc-400">Canal de YouTube</p>
                </div>
              </div>
            </div>

            <div class="pt-8 border-t border-zinc-50 dark:border-zinc-900">
              <h4 class="text-xs font-bold uppercase tracking-widest text-zinc-400 mb-4">Siguiente</h4>
              <div id="next-lesson-container">
                <!-- La siguiente lección se insertará aquí -->
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <script>
    const courseData = [
      {
        module: "0. Introducción: Lo Fundamental",
        lessons: [
          {
            id: "v1",
            title: "¿Qué es y cómo usar NotebookLM?",
            instructor: "Dot CSV",
            youtubeId: "t2i3AcsTTM4",
            duration: "15 min",
            description: "La base esencial: qué es una libreta inteligente y cómo cargar tus fuentes para empezar a trabajar.",
            tech: "Introducción"
          },
          {
            id: "v2",
            title: "NotebookLM: Tutorial para principiantes",
            instructor: "Midudev",
            youtubeId: "Xv5ZrnzA2DA",
            duration: "13 min",
            description: "Guía paso a paso por la interfaz y las funciones básicas para organizar tus ideas desde cero.",
            tech: "Básico"
          }
        ]
      },
      {
        module: "I. Especialización en NotebookLM + Gemini",
        lessons: [
          {
            id: "v3",
            title: "Gemini 3 + NotebookLM: 5 casos prácticos",
            instructor: "Migue Baena IA",
            youtubeId: "31ambByo76I",
            duration: "16 min",
            description: "Aprende cómo aplicar NotebookLM y Gemini para flujos de trabajo ordenados y útiles en el día a día.",
            tech: "NotebookLM"
          },
          {
            id: "v4",
            title: "Curso completo NotebookLM + Gemini 2.5 Pro",
            instructor: "Xavier Mitjana",
            youtubeId: "YqDNivrhBG0",
            duration: "18 min",
            description: "Guía completa: desde usarlo como asistente de investigación hasta construir un proyecto real paso a paso.",
            tech: "NotebookLM"
          },
          {
            id: "v5",
            title: "NotebookLM + Gemini: Tutorial paso a paso",
            instructor: "Xavier Mitjana",
            youtubeId: "tXa5LYaTl0U",
            duration: "23 min",
            description: "Tutorial práctico para crear contenido complejo (como un videopodcast) usando ambas IAs sincronizadas.",
            tech: "Tutorial"
          },
          {
            id: "v6",
            title: "Casos de uso reales: Probando Gemini 2.5",
            instructor: "Migue Baena IA",
            youtubeId: "hAGsON_lZQo",
            duration: "12 min",
            description: "Demostración real de la integración en escenarios concretos y cómo te puede beneficiar.",
            tech: "Casos Reales"
          }
        ]
      },
      {
        module: "II. Herramientas de Análisis y Productividad",
        lessons: [
          {
            id: "v7",
            title: "Analiza datos y Excel con ChatGPT Canvas",
            instructor: "Xavier Mitjana",
            youtubeId: "f5r6cSjgejY",
            duration: "12 min",
            description: "Transforma tablas complejas y genera fórmulas potentes sin saber programar.",
            tech: "ChatGPT"
          },
          {
            id: "v8",
            title: "Visualización de datos con Gemini",
            instructor: "Migue Baena IA",
            youtubeId: "LmwZQTv6KkI",
            duration: "10 min",
            description: "Convierte filas de datos en gráficos interactivos y reportes visuales de alto impacto.",
            tech: "Gemini"
          },
          {
            id: "v9",
            title: "De notas a presentaciones de impacto",
            instructor: "Migue Baena IA",
            youtubeId: "LFTVPWQqAxw",
            duration: "14 min",
            description: "Aprende a estructurar presentaciones profesionales desde simples notas usando IA.",
            tech: "Productividad"
          },
          {
            id: "v10",
            title: "Deep Research: Investigación Avanzada",
            instructor: "Xavier Mitjana",
            youtubeId: "7fHpHG0A3L0",
            duration: "14 min",
            description: "Investigación profunda con fuentes verificadas para la toma de decisiones ejecutivas.",
            tech: "Research"
          }
        ]
      }
    ];

    let currentLesson = courseData[0].lessons[0];
    let completedLessons = JSON.parse(localStorage.getItem('ia-academy-progress')) || [];
    let isSidebarOpen = true;

    const allLessons = courseData.flatMap(m => m.lessons);

    // --- FUNCIONES CORE ---

    function init() {
      // Manejo de Modo Oscuro inicial
      if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
        document.documentElement.classList.add('dark');
      } else {
        document.documentElement.classList.remove('dark');
      }

      const savedLastLessonId = localStorage.getItem('ia-academy-last-lesson');
      if (savedLastLessonId) {
        const lesson = allLessons.find(l => l.id === savedLastLessonId);
        if (lesson) currentLesson = lesson;
      }

      setupEventListeners();
      render();
    }

    function setupEventListeners() {
      // Toggle Modo Oscuro
      document.getElementById('theme-toggle').addEventListener('click', () => {
        document.documentElement.classList.toggle('dark');
        if (document.documentElement.classList.contains('dark')) {
          localStorage.theme = 'dark';
        } else {
          localStorage.theme = 'light';
        }
      });

      document.getElementById('toggle-sidebar').addEventListener('click', () => {
        isSidebarOpen = !isSidebarOpen;
        const sidebar = document.getElementById('sidebar');
        if (isSidebarOpen) {
          sidebar.classList.remove('sidebar-closed');
        } else {
          sidebar.classList.add('sidebar-closed');
        }
      });

      document.getElementById('complete-btn').addEventListener('click', () => {
        toggleComplete(currentLesson.id);
      });
    }

    function toggleComplete(id) {
      if (completedLessons.includes(id)) {
        completedLessons = completedLessons.filter(l => l !== id);
      } else {
        completedLessons.push(id);
      }
      localStorage.setItem('ia-academy-progress', JSON.stringify(completedLessons));
      render();
    }

    function setLesson(id) {
      const lesson = allLessons.find(l => l.id === id);
      if (lesson) {
        currentLesson = lesson;
        localStorage.setItem('ia-academy-last-lesson', currentLesson.id);
        render();
      }
    }

    function render() {
      renderSidebar();
      renderContent();
      updateProgress();
    }

    function renderSidebar() {
      const container = document.getElementById('module-container');
      container.innerHTML = '';

      courseData.forEach((module, mIdx) => {
        const moduleEl = document.createElement('div');
        moduleEl.className = 'mb-8';

        let lessonsHtml = '';
        module.lessons.forEach(lesson => {
          const isActive = currentLesson.id === lesson.id;
          const isCompleted = completedLessons.includes(lesson.id);

          lessonsHtml += `
                        <button onclick="setLesson('${lesson.id}')"
                            class="w-full group flex items-start gap-3 p-3 rounded-xl transition-all duration-200 text-left cursor-pointer
                            ${isActive ? 'bg-zinc-900 dark:bg-white text-white dark:text-black' : 'hover:bg-zinc-50 dark:hover:bg-zinc-800/50'}">
                            <div class="mt-1" onclick="event.stopPropagation(); toggleComplete('${lesson.id}');">
                                <i class="${isCompleted ? 'ph-fill ph-check-circle text-zinc-400 dark:text-zinc-500' : 'ph ph-circle text-zinc-300 dark:text-zinc-600'} text-lg"></i>
                            </div>
                            <div class="flex-1 min-w-0">
                                <p class="text-sm font-medium leading-snug mb-0.5 ${isActive ? 'text-white dark:text-black' : 'text-zinc-700 dark:text-zinc-300'}">
                                    ${lesson.title}
                                </p>
                                <span class="text-[10px] ${isActive ? 'text-zinc-400 dark:text-zinc-500' : 'text-zinc-400 dark:text-zinc-500'}">
                                    ${lesson.duration} • ${lesson.instructor.split(' ')[0]}
                                </span>
                            </div>
                        </button>
                    `;
        });

        moduleEl.innerHTML = `
                    <h3 class="px-4 text-[11px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest mb-3">
                        ${module.module}
                    </h3>
                    <div class="space-y-1">
                        ${lessonsHtml}
                    </div>
                `;
        container.appendChild(moduleEl);
      });
    }

    function renderContent() {
      const currentIndex = allLessons.findIndex(l => l.id === currentLesson.id);

      // Breadcrumb
      document.getElementById('breadcrumb-lesson').innerText = currentLesson.title;

      // Video
      document.getElementById('video-frame').src = `https://www.youtube.com/embed/${currentLesson.youtubeId}?rel=0&modestbranding=1&autoplay=0`;

      // Info
      document.getElementById('lesson-tech').innerText = currentLesson.tech;
      document.getElementById('lesson-counter').innerText = `Lección ${currentIndex + 1} de ${allLessons.length}`;
      document.getElementById('lesson-title').innerText = currentLesson.title;
      document.getElementById('lesson-description').innerText = currentLesson.description;

      // Botón completar
      const completeBtn = document.getElementById('complete-btn');
      if (completedLessons.includes(currentLesson.id)) {
        completeBtn.innerText = 'Lección completada';
        completeBtn.classList.remove('bg-black', 'dark:bg-white', 'text-white', 'dark:text-black');
        completeBtn.classList.add('bg-zinc-100', 'dark:bg-zinc-800', 'text-zinc-500', 'dark:text-zinc-400');
      } else {
        completeBtn.innerText = 'Marcar como completada';
        completeBtn.classList.add('bg-black', 'dark:bg-white', 'text-white', 'dark:text-black');
        completeBtn.classList.remove('bg-zinc-100', 'dark:bg-zinc-800', 'text-zinc-500', 'dark:text-zinc-400');
      }

      // Instructor
      document.getElementById('instructor-name').innerText = currentLesson.instructor;
      document.getElementById('instructor-initial').innerText = currentLesson.instructor[0];

      // Siguiente lección
      const nextContainer = document.getElementById('next-lesson-container');
      if (currentIndex < allLessons.length - 1) {
        const next = allLessons[currentIndex + 1];
        nextContainer.innerHTML = `
                    <button onclick="setLesson('${next.id}')" class="group flex items-center gap-3 text-left w-full p-2 rounded-xl hover:bg-zinc-50 dark:hover:bg-zinc-900 transition-colors">
                        <div class="w-12 h-12 rounded-lg bg-zinc-50 dark:bg-zinc-800 flex items-center justify-center group-hover:bg-zinc-100 dark:group-hover:bg-zinc-700 transition-colors">
                            <i class="ph-fill ph-play text-zinc-400"></i>
                        </div>
                        <div class="flex-1">
                            <p class="text-xs font-bold text-zinc-900 dark:text-white line-clamp-2 leading-snug">
                                ${next.title}
                            </p>
                        </div>
                    </button>
                `;
      } else {
        nextContainer.innerHTML = `<p class="text-xs text-zinc-400 italic mt-2">Has llegado al final del curso</p>`;
      }
    }

    function updateProgress() {
      const progress = Math.round((completedLessons.length / allLessons.length) * 100);
      document.getElementById('progress-text').innerText = `${progress}%`;
      document.getElementById('progress-bar').style.width = `${progress}%`;
    }

    // --- INICIAR APP ---
    window.addEventListener('load', init);
  </script>
</body>

</html>